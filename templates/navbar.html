{% load static %}
<nav class="bg-base-100 sticky top-0 z-40">
  <div class="max-w-7xl mx-auto px-2 lg:px-4">
    <div class="relative h-16 flex items-center">
      <div class="flex items-center flex-shrink-0">
        <a href="{% url 'feeds_module:main_view' %}" class="inline-flex items-center">
          <img
            src="{% static 'images/logo-text.svg' %}"
            alt="Movezz"
            class="h-10 sm:h-12"
          />
        </a>
      </div>

      <div class="hidden md:block absolute left-1/2 transform -translate-x-1/2">
        <ul class="flex space-x-10 text-sm">
          <li>
            <a
              href="{% url 'feeds_module:main_view' %}"
              class="py-2 {% if active_page == 'feeds' %}text-lime-500 font-semibold{% else %}text-base-content/80{% endif %}"
              >For You</a
            >
          </li>
          <li>
            <a
              href="#"
              class="py-2 {% if active_page == 'broadcast' %}text-primary font-semibold{% else %}text-base-content/80{% endif %}"
              >Broadcasts</a
            >
          </li>
          <li>
            <a
              href="#"
              class="py-2 {% if active_page == 'marketplace' %}text-primary font-semibold{% else %}text-base-content/80{% endif %}"
              >Marketplace</a
            >
          </li>
        </ul>
      </div>

      <div class="ml-auto flex items-center space-x-3">
        <a
          href="{% url 'message_module:chat_home' %}"
          class="btn btn-ghost btn-circle sm:inline-flex"
          aria-label="Messages"
        >
          <img src="{% static 'images/message-icon.svg' %}" alt="message" />
        </a>

        <div class="hidden md:block dropdown dropdown-end">
          <label
            tabindex="0"
            role="button"
            class="btn btn-ghost hover:bg-none hover:shadow-none focus:shadow-none focus:bg-transparent rounded-full gap-2 px-2"
          >
            <div
              class="w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center overflow-hidden"
            >
              {% if user.is_authenticated and user_avatar_url %}
              <img
                src="{{ user_avatar_url }}"
                alt="{{ user.get_full_name|default:user.username }}"
                class="object-cover w-full h-full"
              />
              {% else %}
              <span class="text-sm font-bold"
                >{{ user.username|slice:":1"|upper }}</span
              >
              {% endif %}
            </div>
            <i data-lucide="chevron-down" class="lucide-icon h-4 w-4"></i>
          </label>

          <div
            tabindex="0"
            class="dropdown-content mt-2 w-50 rounded-xl overflow-hidden border border-base-300 shadow-md"
          >
            <a
              href="{% url 'profile_module:profile_detail' username=user.username %}"
              class="block w-full text-center py-3 bg-base-100 text-base-content text-sm hover:bg-base-200 transition-colors"
              >Profile</a
            >
            <a
              href="{% url 'auth_module:logout' %}"
              class="block w-full text-center py-3 bg-lime-400 text-base-content font-medium text-sm hover:bg-lime-400 focus:outline-none hover:cursor-pointer hover:bg-lime-500 transition-colors"
              >Logout</a
            >
          </div>
        </div>

        <div class="md:hidden dropdown dropdown-end">
          <label
            tabindex="0"
            role="button"
            class="btn btn-ghost hover:bg-none hover:shadow-none focus:shadow-none focus:bg-transparent rounded-full gap-2 px-2"
          >
            <div
              class="w-10 h-10 rounded-full bg-primary text-primary-content flex items-center justify-center overflow-hidden"
            >
              {% if user.is_authenticated and user_avatar_url %}
              <img
                src="{{ user_avatar_url }}"
                alt="{{ user.get_full_name|default:user.username }}"
                class="object-cover w-full h-full"
              />
              {% else %}
              <span class="text-sm font-bold"
              >{{ user.username|slice:":1"|upper }}</span
            >
              {% endif %}
            </div>
            <i data-lucide="chevron-down" class="lucide-icon h-4 w-4"></i>
          </label>

          <div
            tabindex="0"
            class="dropdown-content mt-2 w-50 rounded-xl overflow-hidden border border-base-300 shadow-md"
          >
            <a
              href="{% url 'feeds_module:main_view' %}"
              class="block w-full text-center py-3 bg-base-100 text-base-content text-sm hover:bg-base-200 transition-colors"
              >For You</a
            >
            <a
              href="#"
              class="block w-full text-center py-3 bg-base-100 text-base-content text-sm hover:bg-base-200 transition-colors"
              >Broadcast</a
            >
            <a
              href="#"
              class="block w-full text-center py-3 bg-base-100 text-base-content text-sm hover:bg-base-200 transition-colors"
              >Marketplace</a
            >
            <a
              href="{% url 'profile_module:profile_detail' username=user.username%}"
              class="block w-full text-center py-3 bg-base-100 text-base-content text-sm hover:bg-base-200 transition-colors"
              >Profile</a
            >
            <a
              href="{% url 'auth_module:logout' %}"
              class="block w-full text-center py-3 bg-lime-400 text-base-content font-medium text-sm hover:bg-lime-400 focus:outline-none hover:cursor-pointer hover:bg-lime-500 transition-colors"
              >Logout</a
            >
          </div>
        </div>
        {% comment %}
        <div class="md:hidden">
          <div class="dropdown">
            <label
              tabindex="0"
              class="btn btn-ghost btn-square"
              aria-label="Open menu"
            >
              <i data-lucide="menu" class="lucide-icon"></i>
            </label>
            <ul
              tabindex="0"
              class="dropdown-content menu p-2 mt-2 shadow bg-base-100 rounded-box w-48"
            >
              <li><a href="#">For You</a></li>
              <li><a href="#">Broadcast</a></li>
              <li><a href="#">Marketplace</a></li>
              <li class="menu-title"></li>
              <li><a href="#">Profile</a></li>
              <li>
                <form method="post" action="#">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-block btn-success">
                    Logout
                  </button>
                </form>
              </li>
            </ul>
          </div>
        </div>
        {% endcomment %}
      </div>
    </div>
  </div>
</nav>
